# λ©μ°¨

- [κµ¬μ΅°μ  μ„λΈ νƒ€μ΄ν•‘(Structural Subtyping)](#κµ¬μ΅°μ -μ„λΈ-νƒ€μ΄ν•‘structural-subtyping)
- [νƒ€μ… νΈν™μ„±(Type Compatibility)](#νƒ€μ…-νΈν™μ„±type-compatibility)
  - [κΈ°λ³Έ νƒ€μ… νΈν™μ„±](#κΈ°λ³Έ-νƒ€μ…-νΈν™μ„±)
  - [κ°μ²΄ νƒ€μ… νΈν™μ„±](#κ°μ²΄-νƒ€μ…-νΈν™μ„±)
- [Ref](#ref)

<br>

# κµ¬μ΅°μ  μ„λΈ νƒ€μ΄ν•‘(Structural Subtyping)

νƒ€μ… νΈν™μ„±μ„ μ΄ν•΄ν•κΈ° μ„ν•΄μ„ μ£Όμ” κ°λ…μΈ λ…λ©μ  νƒ€μ΄ν•‘, κµ¬μ΅°μ  νƒ€μ΄ν•‘, κµ¬μ΅°μ  μ„λΈ νƒ€μ΄ν•‘μ— λ€ν•΄μ„ μ΄ν•΄ν•  ν•„μ”κ°€ μλ‹¤.

<strong>λ…λ©μ  νƒ€μ΄ν•‘(Nominal Typing)</strong>μ€ νƒ€μ…μ μ΄λ¦„μ„ κΈ°λ°μΌλ΅ νΈν™μ„±μ„ κ²°μ •ν•λ‹¤. Java, C#, C++κ³Ό κ°™μ€ μ–Έμ–΄λ“¤μ΄ μ‚¬μ©ν•λ”λ°, κµ¬μ΅°κ°€ λ™μΌν•΄λ„ μ΄λ¦„μ΄ λ‹¤λ¥΄λ‹¤λ©΄ νΈν™λμ§€ μ•λ”λ‹¤. λ…μ‹μ μΈ μƒμ† κ΄€κ³„λ‚ μΈν„°νμ΄μ¤ κµ¬ν„ν•΄μ•Ό ν•λ―€λ΅ νƒ€μ… μ•μ •μ„±μ΄ λ†’κ³  μλ„ν•μ§€ μ•μ€ νƒ€μ… νΈν™μ„ λ°©μ§€ν•  μ μλ‹¤.

```java
// Java
class Person {
  String name;
  int age;
}

class Employee {
  String name;
  int age;
}

Person person = new Person();
Employee employee = person; // β Error β®• incompatible types: Person cannot be converted to Employee
```

<br>

<strong>κµ¬μ΅°μ  νƒ€μ΄ν•‘(Structural Typing)</strong>μ€ νƒ€μ…μ μ‹¤μ  κµ¬μ΅°λ‚ λ¨μ–‘μ„ κΈ°λ°μΌλ΅ νƒ€μ… νΈν™μ„±μ„ κ²°μ •ν•λ‹¤. νƒ€μ…μ μ΄λ¦„μ΄ μ•„λ‹ νƒ€μ…μ΄ κ°€μ§„ ν”„λ΅νΌν‹°μ™€ λ©”μ„λ“λ΅ κµ¬μ΅°λ¥Ό λΉ„κµν•λ‹¤. TypeScript, Goμ™€ κ°™μ€ μ–Έμ–΄λ“¤μ΄ μ‚¬μ©ν•λ©°, μ μ—°μ„±μ΄ λ†’κ³  μ½”λ“ μ¬μ‚¬μ©μ„±μ΄ λ†’λ‹¤.

```typescript
// TypeScript
interface Person {
  name: string;
  age: number;
}

interface Employee {
  name: string;
  age: number;
}

let person: Person = { name: 'μµκ°λ°', age: 30 };
let employee: Employee = person; // β…
```

<br>

λ§μ§€λ§‰μΌλ΅ κµ¬μ΅°μ  μ„λΈνƒ€μ΄ν•‘(Structural Subtyping)μ€ κµ¬μ΅°μ  νƒ€μ΄ν•‘μ ν• ν•νƒλ΅, ν• νƒ€μ…μ΄ λ‹¤λ¥Έ νƒ€μ…μ λ¨λ“  λ©¤λ²„λ¥Ό ν¬ν•¨ν•  λ• μ„λΈνƒ€μ… κ΄€κ³„κ°€ μ„±λ¦½ν•λ‹¤.

```typescript
// TypeScript
interface Animal {
  name: string;
}

interface Dog {
  name: string;
  breed: string;
}

let animal: Animal;
let dog: Dog = { name: 'λ―Ώμμ΄', breed: 'μ§„λ—κ°' };

animal = dog; // β… Dogλ” Animalμ λ¨λ“  λ©¤λ²„λ¥Ό ν¬ν•¨ν•λ―€λ΅ νΈν™ κ°€λ¥
// dog = animal; // β Animalμ€ breed λ©¤λ²„κ°€ μ—†μΌλ―€λ΅ νΈν™ λ¶κ°€
```

<br>

# νƒ€μ… νΈν™μ„±(Type Compatibility)

> π’­ λ²”μ„κ°€ λ„“μ€ νƒ€μ…(μνΌ ν΄λμ¤)μ—λ§ μΆμ€ νƒ€μ…(μ„λΈ ν΄λμ¤) ν• λ‹Ήμ΄ κ°€λ¥ν•λ‹¤.

| νƒ€μ… β†’        | any | unknown | object | void | undefined | null | never |
| ------------- | --- | ------- | ------ | ---- | --------- | ---- | ----- |
| **any**       |     | β…      | β…     | β…   | β…        | β…   | β    |
| **unknown**   | β…  |         | β     | β   | β        | β   | β    |
| **object**    | β…  | β…      |        | β   | β        | β   | β    |
| **void**      | β…  | β…      | β     |      | β        | β   | β    |
| **undefined** | β…  | β…      | β…     | β…   |           | β…   | β    |
| **null**      | β…  | β…      | β…     | β…   | β…        |      | β    |
| **never**     | β…  | β…      | β…     | β…   | β…        | β…   |       |

<br>

## κΈ°λ³Έ νƒ€μ… νΈν™μ„±

```typescript
let num: number = 1;
let literalNum: 1 = 1;

num = literalNum; // β… upcasting: μ«μν• νƒ€μ…μ— λ¦¬ν„°λ΄ μ«μ ν• λ‹Ή κ°€λ¥
literalNum = num; // β downcasting: λ¦¬ν„°λ΄ μ«μ νƒ€μ…μ— μ«μν• νƒ€μ… ν• λ‹Ή λ¶κ°€
```

<br>

## κ°μ²΄ νƒ€μ… νΈν™μ„±

> π’­ κ°μ²΄μ— λ©¤λ²„κ°€ λ§μ„μλ΅ λ²”μ„κ°€ λ„“μ€ μνΌν΄λμ¤λ΅ λ³΄μ—¬μ„ μ΄ν•΄ν•κΈ° μ–΄λ ¤μ› μ—λ‹¤. ν•μ§€λ§ λΉ κ°μ²΄κ°€ μ μΌ λ„“μ€ λ²”μ„μ΄κ³  λ©¤λ²„λ¥Ό μ¶”κ°€ν• μλ΅ λ¦¬ν„°λ΄ κ°’μ„ μ¶”κ°€ν•λ” κ²ƒμΌλ΅ μƒκ°ν•λ‹ μ΄ν•΄ν•κΈ° μμ›”ν–λ‹¤.

```typescript
type Animal = {
  name: string;
  age: number;
};

type Dog = {
  name: string;
  age: number;
  breed: string;
};

let animal: Animal = { name: 'ν† λΌ', age: 3 };
let dog: Dog = { name: 'νƒ„μ΄', age: 3, breed: 'μ‚½μ‚΄κ°' };

animal = dog; // β… upcasting: Dogλ” Animalμ λ¨λ“  λ©¤λ²„λ¥Ό ν¬ν•¨
dog = animal; // β downcasting: Animalμ€ Dogμ λ¨λ“  λ©¤λ²„λ¥Ό λ―Έν¬ν•¨
```

<br>

`Animal`κ³Ό `Dog`νƒ€μ…μ μμ λ¥Ό μ‚΄ν΄λ³΄λ©΄μ„ κ°μ²΄λ„ μ—…μΊμ¤ν…μ΄ κ°€λ¥ν• κ²ƒμ„ ν™•μΈν–λ‹¤. ν•μ§€λ§ μ§μ ‘ ν• λ‹Ήν•΄λ³΄λ©΄ λ‹¤μκ³Ό κ°™μ€ λ¬Έμ κ°€ λ°μƒν•λ‹¤.

```typescript
type Animal = {
  name: string;
  age: number;
};

type Dog = {
  name: string;
  age: number;
  breed: string;
};

let rabbit: Animal = { name: 'ν† λΌ', age: 3, breed: 'κµ΄ν† λΌ' };
// β Object literal may only specify known properties, and 'breed' does not exist in type 'Animal'.
```

`Animal` νƒ€μ…μ— `Dog` νƒ€μ…μ κ°μ²΄λ¥Ό μ§μ ‘ ν• λ‹Ήν•λ©΄ μ—…μΊμ¤ν…μ„μ—λ„ λ¶κµ¬ν•κ³  `breed` ν”„λ΅νΌν‹°κ°€ μ—†λ‹¤λ” μ¤λ¥κ°€ λ°μƒν•λ‹¤. μ΄λ” νƒ€μ…μ¤ν¬λ¦½νΈμ μ΄κ³Ό μ†μ„± κ²€μ‚¬ λ•λ¬Έμ— λ°μƒν•λ” λ¬Έμ μ΄λ‹¤.

<br>

# Ref

- [TypeScript Docs](https://www.typescriptlang.org/ko/docs/handbook/type-compatibility.html)
- [[toss tech] TypeScript νƒ€μ… μ‹μ¤ν… λ―μ–΄λ³΄κΈ°: νƒ€μ… νΈν™μ„±
  ](https://toss.tech/article/typescript-type-compatibility)
