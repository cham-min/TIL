# 목차

- [Decorators 설정](#decorators-설정)
- [Decorators](#decorators)
- [Decorators Factories](#decorator-factories)
- [Decorators Composition](#decorator-composition)
- [Ref](#ref)

<br>

# Decorators 설정

데코레이터를 활성화하기 위해서는 `experimentDecorators` 컴파일러 옵션을 활성화해야한다.

<br>

**Command Line**

```shell
tsc --target ES5 --experimentalDecorators
```

**tsconfig.json**

```json
{
  "compilerOptions": {
    "target": "ES5",
    "experimentalDecorators": true
  }
}
```

<br>

# Decorators

데코레이터는 TypeScript에서 클래스, 메서드, 프로퍼티, 매개변수에 주석을 달아 특별한 기능을 부여할 수 있게 해주는 기능이다. 데코레이터를 이용하면 반복적인 코드를 간단하게 처리할 수 있다. 데코레이터는 `@expression` 형태로 `expression`은 런타임에 호출되는 함수여야 한다.

데코레이터 `@Logger`를 사용하기 위해서 `Logger` 함수를 아래와 같이 만들 수 있다.

```typescript
function Logger(target: Function) {
  console.log(target);
}

@Logger
class Person {
  name = '최개발';

  constructor() {}
}

const person = new Person();
/*
function Person() {
  this.name = '최개발';
} 
*/
```

<br>

# Decorator Factories

데코레이터 팩토리는 데코레이터 함수를 반환하는 함수이다. 일반적으로 데코레이터에 대한 매개변수를 받아 해당 매개변수를 사용하여 동적으로 데코레이터를 생성하는 데 사용된다.

```typescript
function Logger(logStr: string) {
  return function (target: Function) {
    console.log(logStr);
    console.log(target);
  };
}

@Logger('인수 전달도 가능해요!')
class Person {
  name = '최개발';

  constructor() {}
}

const person = new Person();
/*
"인수 전달도 가능해요!"
function Person() {
  this.name = '최개발';
} 
*/
```

<br>

# Decorator Composition

아래 예제처럼 선언에 여러 데코레이터를 적용할 수 있다. 데코레이터 수행 순서를 살펴보자.

```typescript
function Logger(logStr: string) {
  console.log('첫 번째 팩토리');
  return function (target: Function) {
    console.log(logStr);
  };
}

function Logger2(logStr: string) {
  console.log('두 번째 팩토리');
  return function (target: Function) {
    console.log(logStr);
  };
}

@Logger('첫 번째가 먼저 나올까?')
@Logger2('두 번째가 먼저 나올까?')
class Person {
  name = '최개발';

  constructor() {}
}

const person = new Person();
/*
"첫 번째 팩토리"
"두 번째 팩토리"
"두 번째가 먼저 나올까?" 
"첫 번째가 먼저 나올까?" 
*/
```

1. 데코레이터 표현은 위에서 아래로 평가된다.
2. 결과는 아래에서 위로 함수가 호출된다.

<br>

# Ref

- [TypeScript Docs](https://www.typescriptlang.org/docs/handbook/decorators.html)
